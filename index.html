<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panchangam (JSON)</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h2>ü™ê Panchangam ‚Äì Transit</h2>

<input type="date" id="dateInput">
<button onclick="loadData()">Show</button>

<div id="info"></div>

<table>
<thead>
<tr>
<th>Planet</th>
<th>DMS</th>
<th>Sign</th>
<th>Star</th>
<th>Sub</th>
<th>Time</th>
</tr>
</thead>
<tbody id="tbody">
<tr><td colspan="6">Select a date</td></tr>
</tbody>
</table>

<script>
async function loadData(){

  const input = document.getElementById("dateInput").value;
  if(!input){ alert("Select date"); return; }

  // YYYY-MM-DD ‚Üí DD-MM-YYYY
  const [y,m,d] = input.split("-");
  const selectedDate = `${d}-${m}-${y}`;

  const res = await fetch("panchangam_2026.json");
  const data = await res.json();

  const tbody = document.getElementById("tbody");
  const info = document.getElementById("info");
  tbody.innerHTML = "";
  info.innerHTML = "";

  const rows = data.filter(r => r.Date === selectedDate);

  if(rows.length === 0){
    tbody.innerHTML =
      `<tr><td colspan="6">No data for ${selectedDate}</td></tr>`;
    return;
  }

  // show Day + Ayanamsam once
  info.innerText = `üìÖ ${rows[0].Day} | üïâÔ∏è Ayanamsam: ${rows[0].Ayanamsam}`;

  rows.forEach(r=>{
    tbody.innerHTML += `
      <tr>
        <td>${r.Planet}</td>
        <td>${r.DMS}</td>
        <td>${r.Sign}</td>
        <td>${r.Star}</td>
        <td>${r.Sub}</td>
        <td>${r.Time}</td>
      </tr>`;
  });
}
</script>

</body>
</html>
